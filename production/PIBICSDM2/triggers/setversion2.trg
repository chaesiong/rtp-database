CREATE OR REPLACE EDITIONABLE TRIGGER "PIBICSDM2"."SETVERSION2" BEFORE INSERT OR UPDATE
ON PIBICSDM2.IMMIGRATION
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW
BEGIN
    IF :OLD.VERSION IS NULL THEN
        SELECT 0 INTO :NEW.VERSION FROM DUAL;
        ----ทำการเช็คว่า version ที่ insert เข้ามานั้นเป็น null หรือไม่ ถ้าเป็น null ให้ใส่ค่า version = 0
    END IF;
   EXCEPTION
     WHEN OTHERS THEN
     RAISE;
END SETVERSION_FIX;
/
ALTER TRIGGER "PIBICSDM2"."SETVERSION2" ENABLE;
